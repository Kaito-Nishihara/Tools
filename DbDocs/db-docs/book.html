<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>NK Admin DB 定義書</title>
  <link rel="stylesheet" href="./dbdocs.css" />
</head>
<body>
<div class="page">
<h1 class="title">NK Admin DB 定義書</h1>
<div class="section-title">テーブル一覧</div>
<table class="table">
<thead><tr>
<th class="th-green" style="width:8%;">No.</th>
<th class="th-green" style="width:22%;">スキーマ</th>
<th class="th-green" style="width:30%;">テーブル名</th>
<th class="th-green">備考</th>
</tr></thead>
<tbody>
<tr>
<td class="center">1</td>
<td>dbo</td>
<td>__EFMigrationsHistory</td>
<td></td>
</tr>
<tr>
<td class="center">2</td>
<td>dbo</td>
<td>AuditLogs</td>
<td>監査ログ</td>
</tr>
<tr>
<td class="center">3</td>
<td>dbo</td>
<td>Permissions</td>
<td>操作やリソースを表す権限</td>
</tr>
<tr>
<td class="center">4</td>
<td>dbo</td>
<td>RefreshTokens</td>
<td>リフレッシュトークン</td>
</tr>
<tr>
<td class="center">5</td>
<td>dbo</td>
<td>RolePermissions</td>
<td>ロールと権限の関連（多対多）</td>
</tr>
<tr>
<td class="center">6</td>
<td>dbo</td>
<td>Roles</td>
<td>ロール（権限グループ）</td>
</tr>
<tr>
<td class="center">7</td>
<td>dbo</td>
<td>UserRoles</td>
<td>ユーザーとロールの関連（多対多）を表す中間テーブル</td>
</tr>
<tr>
<td class="center">8</td>
<td>dbo</td>
<td>Users</td>
<td>アプリケーション利用者（基本情報・認証情報・監査情報を含む）</td>
</tr>
</tbody></table>
  <div class="footer">
    <div>NK Admin DB 定義書</div>
    <div>Generated: 2026/01/04 20:21</div>
  </div>
</div>

<div class="page-break"></div>
<div class="page">
<h1 class="title">テーブル定義 __EFMigrationsHistory</h1>
<div class="section-title">テーブル情報</div>
<table class="table meta">
<tr>
<th class="th-green">システム名</th><td>NK Admin</td>
<th class="th-green">作成者</th><td>au248</td>
</tr>
<tr>
<th class="th-green">RDBMS</th><td>SQL Server</td>
<th class="th-green">作成日</th><td>2026/01/04</td>
</tr>
<tr>
<th class="th-green">スキーマ名</th><td>dbo</td>
<th class="th-green">テーブル名</th><td>__EFMigrationsHistory</td>
</tr>
</table>
<div class="section-title">備考</div>
<div class="remarks-box"></div>
<div class="section-title">カラム情報</div>
<table class="table">
<thead><tr>
  <th class="th-green" style="width:6%;">No.</th>
  <th class="th-green" style="width:20%;">カラム名</th>
  <th class="th-green" style="width:18%;">データ型</th>
  <th class="th-green" style="width:12%;">Not Null</th>
  <th class="th-green" style="width:18%;">デフォルト</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">備考</th>
</tr></thead>
<tbody>
<tr>
<td class="center">1</td>
<td>MigrationId</td>
<td>nvarchar(150)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center">○</td>
<td></td>
</tr>
<tr>
<td class="center">2</td>
<td>ProductVersion</td>
<td>nvarchar(32)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td></td>
</tr>
</tbody></table>
<div class="section-title">インデックス</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:30%;">名前</th>
  <th class="th-green" style="width:18%;">種別</th>
  <th class="th-green" style="width:10%;">Unique</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">キー列</th>
</tr></thead>
<tbody>
<tr>
<td>PK___EFMigrationsHistory</td>
<td>CLUSTERED</td>
<td class="center">○</td>
<td class="center">○</td>
<td>MigrationId</td>
</tr>
</tbody></table>
<div class="section-title">リレーション（FK）</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:32%;">FK名</th>
  <th class="th-green">From</th>
  <th class="th-green">To</th>
</tr></thead>
<tbody>
<tr><td colspan="3" class="center">(none)</td></tr>
</tbody></table>
  <div class="footer">
    <div>NK Admin DB 定義書</div>
    <div>Generated: 2026/01/04 20:21</div>
  </div>
</div>

<div class="page-break"></div>
<div class="page">
<h1 class="title">テーブル定義 AuditLogs</h1>
<div class="section-title">テーブル情報</div>
<table class="table meta">
<tr>
<th class="th-green">システム名</th><td>NK Admin</td>
<th class="th-green">作成者</th><td>au248</td>
</tr>
<tr>
<th class="th-green">RDBMS</th><td>SQL Server</td>
<th class="th-green">作成日</th><td>2026/01/04</td>
</tr>
<tr>
<th class="th-green">スキーマ名</th><td>dbo</td>
<th class="th-green">テーブル名</th><td>AuditLogs</td>
</tr>
</table>
<div class="section-title">備考</div>
<div class="remarks-box">監査ログ</div>
<div class="section-title">カラム情報</div>
<table class="table">
<thead><tr>
  <th class="th-green" style="width:6%;">No.</th>
  <th class="th-green" style="width:20%;">カラム名</th>
  <th class="th-green" style="width:18%;">データ型</th>
  <th class="th-green" style="width:12%;">Not Null</th>
  <th class="th-green" style="width:18%;">デフォルト</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">備考</th>
</tr></thead>
<tbody>
<tr>
<td class="center">1</td>
<td>Id</td>
<td>int</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center">○</td>
<td>主キー（内部採番）</td>
</tr>
<tr>
<td class="center">2</td>
<td>ActionType</td>
<td>nvarchar(64)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>操作種別</td>
</tr>
<tr>
<td class="center">3</td>
<td>EntityType</td>
<td>nvarchar(64)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>対象エンティティ名</td>
</tr>
<tr>
<td class="center">4</td>
<td>EntityId</td>
<td>nvarchar(128)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>対象エンティティID</td>
</tr>
<tr>
<td class="center">5</td>
<td>PerformedByUserId</td>
<td>int</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>実行者ユーザーID（Users.Id）</td>
</tr>
<tr>
<td class="center">6</td>
<td>PerformedBy</td>
<td>nvarchar(64)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>実行者</td>
</tr>
<tr>
<td class="center">7</td>
<td>PerformedAt</td>
<td>datetime2(7)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>実行日時（UTC）</td>
</tr>
<tr>
<td class="center">8</td>
<td>DataBefore</td>
<td>nvarchar(max)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>変更前データ（JSON 等）</td>
</tr>
<tr>
<td class="center">9</td>
<td>DataAfter</td>
<td>nvarchar(max)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>変更後データ（JSON 等）</td>
</tr>
<tr>
<td class="center">10</td>
<td>ClientIp</td>
<td>nvarchar(45)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>クライアントIP</td>
</tr>
<tr>
<td class="center">11</td>
<td>Metadata</td>
<td>nvarchar(512)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>追加メタ情報</td>
</tr>
</tbody></table>
<div class="section-title">インデックス</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:30%;">名前</th>
  <th class="th-green" style="width:18%;">種別</th>
  <th class="th-green" style="width:10%;">Unique</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">キー列</th>
</tr></thead>
<tbody>
<tr>
<td>IX_AuditLogs_PerformedAt</td>
<td>NONCLUSTERED</td>
<td class="center"></td>
<td class="center"></td>
<td>PerformedAt</td>
</tr>
<tr>
<td>IX_AuditLogs_PerformedByUserId</td>
<td>NONCLUSTERED</td>
<td class="center"></td>
<td class="center"></td>
<td>PerformedByUserId</td>
</tr>
<tr>
<td>PK_AuditLogs</td>
<td>CLUSTERED</td>
<td class="center">○</td>
<td class="center">○</td>
<td>Id</td>
</tr>
</tbody></table>
<div class="section-title">リレーション（FK）</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:32%;">FK名</th>
  <th class="th-green">From</th>
  <th class="th-green">To</th>
</tr></thead>
<tbody>
<tr>
<td>FK_AuditLogs_Users_PerformedByUserId</td>
<td>dbo.AuditLogs.PerformedByUserId</td>
<td>dbo.Users.Id</td>
</tr>
</tbody></table>
  <div class="footer">
    <div>NK Admin DB 定義書</div>
    <div>Generated: 2026/01/04 20:21</div>
  </div>
</div>

<div class="page-break"></div>
<div class="page">
<h1 class="title">テーブル定義 Permissions</h1>
<div class="section-title">テーブル情報</div>
<table class="table meta">
<tr>
<th class="th-green">システム名</th><td>NK Admin</td>
<th class="th-green">作成者</th><td>au248</td>
</tr>
<tr>
<th class="th-green">RDBMS</th><td>SQL Server</td>
<th class="th-green">作成日</th><td>2026/01/04</td>
</tr>
<tr>
<th class="th-green">スキーマ名</th><td>dbo</td>
<th class="th-green">テーブル名</th><td>Permissions</td>
</tr>
</table>
<div class="section-title">備考</div>
<div class="remarks-box">操作やリソースを表す権限</div>
<div class="section-title">カラム情報</div>
<table class="table">
<thead><tr>
  <th class="th-green" style="width:6%;">No.</th>
  <th class="th-green" style="width:20%;">カラム名</th>
  <th class="th-green" style="width:18%;">データ型</th>
  <th class="th-green" style="width:12%;">Not Null</th>
  <th class="th-green" style="width:18%;">デフォルト</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">備考</th>
</tr></thead>
<tbody>
<tr>
<td class="center">1</td>
<td>Id</td>
<td>int</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center">○</td>
<td>主キー（内部採番）</td>
</tr>
<tr>
<td class="center">2</td>
<td>Code</td>
<td>nvarchar(128)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>権限コード（例: Users.Create）</td>
</tr>
<tr>
<td class="center">3</td>
<td>Name</td>
<td>nvarchar(128)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>表示名</td>
</tr>
<tr>
<td class="center">4</td>
<td>Description</td>
<td>nvarchar(255)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>説明</td>
</tr>
<tr>
<td class="center">5</td>
<td>CreatedAt</td>
<td>datetime2(7)</td>
<td class="center">NOT NULL</td>
<td>getutcdate()</td>
<td class="center"></td>
<td>登録日時（UTC）</td>
</tr>
<tr>
<td class="center">6</td>
<td>UpdatedAt</td>
<td>datetime2(7)</td>
<td class="center">NOT NULL</td>
<td>getutcdate()</td>
<td class="center"></td>
<td>更新日時（UTC）</td>
</tr>
</tbody></table>
<div class="section-title">インデックス</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:30%;">名前</th>
  <th class="th-green" style="width:18%;">種別</th>
  <th class="th-green" style="width:10%;">Unique</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">キー列</th>
</tr></thead>
<tbody>
<tr>
<td>IX_Permissions_Code</td>
<td>NONCLUSTERED</td>
<td class="center">○</td>
<td class="center"></td>
<td>Code</td>
</tr>
<tr>
<td>PK_Permissions</td>
<td>CLUSTERED</td>
<td class="center">○</td>
<td class="center">○</td>
<td>Id</td>
</tr>
</tbody></table>
<div class="section-title">リレーション（FK）</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:32%;">FK名</th>
  <th class="th-green">From</th>
  <th class="th-green">To</th>
</tr></thead>
<tbody>
<tr><td colspan="3" class="center">(none)</td></tr>
</tbody></table>
  <div class="footer">
    <div>NK Admin DB 定義書</div>
    <div>Generated: 2026/01/04 20:21</div>
  </div>
</div>

<div class="page-break"></div>
<div class="page">
<h1 class="title">テーブル定義 RefreshTokens</h1>
<div class="section-title">テーブル情報</div>
<table class="table meta">
<tr>
<th class="th-green">システム名</th><td>NK Admin</td>
<th class="th-green">作成者</th><td>au248</td>
</tr>
<tr>
<th class="th-green">RDBMS</th><td>SQL Server</td>
<th class="th-green">作成日</th><td>2026/01/04</td>
</tr>
<tr>
<th class="th-green">スキーマ名</th><td>dbo</td>
<th class="th-green">テーブル名</th><td>RefreshTokens</td>
</tr>
</table>
<div class="section-title">備考</div>
<div class="remarks-box">リフレッシュトークン</div>
<div class="section-title">カラム情報</div>
<table class="table">
<thead><tr>
  <th class="th-green" style="width:6%;">No.</th>
  <th class="th-green" style="width:20%;">カラム名</th>
  <th class="th-green" style="width:18%;">データ型</th>
  <th class="th-green" style="width:12%;">Not Null</th>
  <th class="th-green" style="width:18%;">デフォルト</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">備考</th>
</tr></thead>
<tbody>
<tr>
<td class="center">1</td>
<td>Id</td>
<td>int</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center">○</td>
<td>主キー（内部採番）</td>
</tr>
<tr>
<td class="center">2</td>
<td>TokenHash</td>
<td>nvarchar(256)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>トークンハッシュ</td>
</tr>
<tr>
<td class="center">3</td>
<td>UserId</td>
<td>int</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>ユーザーID（Users.Id）</td>
</tr>
<tr>
<td class="center">4</td>
<td>ExpiresAt</td>
<td>datetime2(7)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>有効期限（UTC）</td>
</tr>
<tr>
<td class="center">5</td>
<td>RevokedAt</td>
<td>datetime2(7)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>取り消し日時（UTC）</td>
</tr>
<tr>
<td class="center">6</td>
<td>ReplacedByTokenId</td>
<td>int</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>置換されたトークンID</td>
</tr>
<tr>
<td class="center">7</td>
<td>CreatedAt</td>
<td>datetime2(7)</td>
<td class="center">NOT NULL</td>
<td>getutcdate()</td>
<td class="center"></td>
<td>登録日時（UTC）</td>
</tr>
</tbody></table>
<div class="section-title">インデックス</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:30%;">名前</th>
  <th class="th-green" style="width:18%;">種別</th>
  <th class="th-green" style="width:10%;">Unique</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">キー列</th>
</tr></thead>
<tbody>
<tr>
<td>IX_RefreshTokens_TokenHash</td>
<td>NONCLUSTERED</td>
<td class="center">○</td>
<td class="center"></td>
<td>TokenHash</td>
</tr>
<tr>
<td>IX_RefreshTokens_UserId</td>
<td>NONCLUSTERED</td>
<td class="center"></td>
<td class="center"></td>
<td>UserId</td>
</tr>
<tr>
<td>PK_RefreshTokens</td>
<td>CLUSTERED</td>
<td class="center">○</td>
<td class="center">○</td>
<td>Id</td>
</tr>
</tbody></table>
<div class="section-title">リレーション（FK）</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:32%;">FK名</th>
  <th class="th-green">From</th>
  <th class="th-green">To</th>
</tr></thead>
<tbody>
<tr>
<td>FK_RefreshTokens_Users_UserId</td>
<td>dbo.RefreshTokens.UserId</td>
<td>dbo.Users.Id</td>
</tr>
</tbody></table>
  <div class="footer">
    <div>NK Admin DB 定義書</div>
    <div>Generated: 2026/01/04 20:21</div>
  </div>
</div>

<div class="page-break"></div>
<div class="page">
<h1 class="title">テーブル定義 RolePermissions</h1>
<div class="section-title">テーブル情報</div>
<table class="table meta">
<tr>
<th class="th-green">システム名</th><td>NK Admin</td>
<th class="th-green">作成者</th><td>au248</td>
</tr>
<tr>
<th class="th-green">RDBMS</th><td>SQL Server</td>
<th class="th-green">作成日</th><td>2026/01/04</td>
</tr>
<tr>
<th class="th-green">スキーマ名</th><td>dbo</td>
<th class="th-green">テーブル名</th><td>RolePermissions</td>
</tr>
</table>
<div class="section-title">備考</div>
<div class="remarks-box">ロールと権限の関連（多対多）</div>
<div class="section-title">カラム情報</div>
<table class="table">
<thead><tr>
  <th class="th-green" style="width:6%;">No.</th>
  <th class="th-green" style="width:20%;">カラム名</th>
  <th class="th-green" style="width:18%;">データ型</th>
  <th class="th-green" style="width:12%;">Not Null</th>
  <th class="th-green" style="width:18%;">デフォルト</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">備考</th>
</tr></thead>
<tbody>
<tr>
<td class="center">1</td>
<td>RoleId</td>
<td>int</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center">○</td>
<td>ロールID（Roles.Id）</td>
</tr>
<tr>
<td class="center">2</td>
<td>PermissionId</td>
<td>int</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center">○</td>
<td>権限ID（Permissions.Id）</td>
</tr>
<tr>
<td class="center">3</td>
<td>GrantedAt</td>
<td>datetime2(7)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>付与日時（UTC）</td>
</tr>
<tr>
<td class="center">4</td>
<td>GrantedBy</td>
<td>nvarchar(64)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>付与者（監査用）</td>
</tr>
</tbody></table>
<div class="section-title">インデックス</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:30%;">名前</th>
  <th class="th-green" style="width:18%;">種別</th>
  <th class="th-green" style="width:10%;">Unique</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">キー列</th>
</tr></thead>
<tbody>
<tr>
<td>IX_RolePermissions_PermissionId</td>
<td>NONCLUSTERED</td>
<td class="center"></td>
<td class="center"></td>
<td>PermissionId</td>
</tr>
<tr>
<td>IX_RolePermissions_RoleId</td>
<td>NONCLUSTERED</td>
<td class="center"></td>
<td class="center"></td>
<td>RoleId</td>
</tr>
<tr>
<td>PK_RolePermissions</td>
<td>CLUSTERED</td>
<td class="center">○</td>
<td class="center">○</td>
<td>RoleId, PermissionId</td>
</tr>
</tbody></table>
<div class="section-title">リレーション（FK）</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:32%;">FK名</th>
  <th class="th-green">From</th>
  <th class="th-green">To</th>
</tr></thead>
<tbody>
<tr>
<td>FK_RolePermissions_Permissions_PermissionId</td>
<td>dbo.RolePermissions.PermissionId</td>
<td>dbo.Permissions.Id</td>
</tr>
<tr>
<td>FK_RolePermissions_Roles_RoleId</td>
<td>dbo.RolePermissions.RoleId</td>
<td>dbo.Roles.Id</td>
</tr>
</tbody></table>
  <div class="footer">
    <div>NK Admin DB 定義書</div>
    <div>Generated: 2026/01/04 20:21</div>
  </div>
</div>

<div class="page-break"></div>
<div class="page">
<h1 class="title">テーブル定義 Roles</h1>
<div class="section-title">テーブル情報</div>
<table class="table meta">
<tr>
<th class="th-green">システム名</th><td>NK Admin</td>
<th class="th-green">作成者</th><td>au248</td>
</tr>
<tr>
<th class="th-green">RDBMS</th><td>SQL Server</td>
<th class="th-green">作成日</th><td>2026/01/04</td>
</tr>
<tr>
<th class="th-green">スキーマ名</th><td>dbo</td>
<th class="th-green">テーブル名</th><td>Roles</td>
</tr>
</table>
<div class="section-title">備考</div>
<div class="remarks-box">ロール（権限グループ）</div>
<div class="section-title">カラム情報</div>
<table class="table">
<thead><tr>
  <th class="th-green" style="width:6%;">No.</th>
  <th class="th-green" style="width:20%;">カラム名</th>
  <th class="th-green" style="width:18%;">データ型</th>
  <th class="th-green" style="width:12%;">Not Null</th>
  <th class="th-green" style="width:18%;">デフォルト</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">備考</th>
</tr></thead>
<tbody>
<tr>
<td class="center">1</td>
<td>Id</td>
<td>int</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center">○</td>
<td>主キー（内部採番）</td>
</tr>
<tr>
<td class="center">2</td>
<td>Code</td>
<td>nvarchar(64)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>ロールコード（例: Admin / User 等）</td>
</tr>
<tr>
<td class="center">3</td>
<td>Name</td>
<td>nvarchar(100)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>ロール名（表示名）</td>
</tr>
<tr>
<td class="center">4</td>
<td>Description</td>
<td>nvarchar(255)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>ロール説明</td>
</tr>
<tr>
<td class="center">5</td>
<td>IsDeleted</td>
<td>bit</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>論理削除フラグ</td>
</tr>
<tr>
<td class="center">6</td>
<td>CreatedAt</td>
<td>datetime2(7)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>登録日時（UTC）</td>
</tr>
<tr>
<td class="center">7</td>
<td>UpdatedAt</td>
<td>datetime2(7)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>更新日時（UTC）</td>
</tr>
</tbody></table>
<div class="section-title">インデックス</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:30%;">名前</th>
  <th class="th-green" style="width:18%;">種別</th>
  <th class="th-green" style="width:10%;">Unique</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">キー列</th>
</tr></thead>
<tbody>
<tr>
<td>IX_Roles_Code</td>
<td>NONCLUSTERED</td>
<td class="center">○</td>
<td class="center"></td>
<td>Code</td>
</tr>
<tr>
<td>PK_Roles</td>
<td>CLUSTERED</td>
<td class="center">○</td>
<td class="center">○</td>
<td>Id</td>
</tr>
</tbody></table>
<div class="section-title">リレーション（FK）</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:32%;">FK名</th>
  <th class="th-green">From</th>
  <th class="th-green">To</th>
</tr></thead>
<tbody>
<tr><td colspan="3" class="center">(none)</td></tr>
</tbody></table>
  <div class="footer">
    <div>NK Admin DB 定義書</div>
    <div>Generated: 2026/01/04 20:21</div>
  </div>
</div>

<div class="page-break"></div>
<div class="page">
<h1 class="title">テーブル定義 UserRoles</h1>
<div class="section-title">テーブル情報</div>
<table class="table meta">
<tr>
<th class="th-green">システム名</th><td>NK Admin</td>
<th class="th-green">作成者</th><td>au248</td>
</tr>
<tr>
<th class="th-green">RDBMS</th><td>SQL Server</td>
<th class="th-green">作成日</th><td>2026/01/04</td>
</tr>
<tr>
<th class="th-green">スキーマ名</th><td>dbo</td>
<th class="th-green">テーブル名</th><td>UserRoles</td>
</tr>
</table>
<div class="section-title">備考</div>
<div class="remarks-box">ユーザーとロールの関連（多対多）を表す中間テーブル</div>
<div class="section-title">カラム情報</div>
<table class="table">
<thead><tr>
  <th class="th-green" style="width:6%;">No.</th>
  <th class="th-green" style="width:20%;">カラム名</th>
  <th class="th-green" style="width:18%;">データ型</th>
  <th class="th-green" style="width:12%;">Not Null</th>
  <th class="th-green" style="width:18%;">デフォルト</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">備考</th>
</tr></thead>
<tbody>
<tr>
<td class="center">1</td>
<td>UserId</td>
<td>int</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center">○</td>
<td>ユーザーID（Users.Id）</td>
</tr>
<tr>
<td class="center">2</td>
<td>RoleId</td>
<td>int</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center">○</td>
<td>ロールID（Roles.Id）</td>
</tr>
<tr>
<td class="center">3</td>
<td>AssignedAt</td>
<td>datetime2(7)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>付与日時（UTC）</td>
</tr>
<tr>
<td class="center">4</td>
<td>AssignedBy</td>
<td>nvarchar(64)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>付与者（監査用）</td>
</tr>
</tbody></table>
<div class="section-title">インデックス</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:30%;">名前</th>
  <th class="th-green" style="width:18%;">種別</th>
  <th class="th-green" style="width:10%;">Unique</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">キー列</th>
</tr></thead>
<tbody>
<tr>
<td>IX_UserRoles_RoleId</td>
<td>NONCLUSTERED</td>
<td class="center"></td>
<td class="center"></td>
<td>RoleId</td>
</tr>
<tr>
<td>IX_UserRoles_UserId</td>
<td>NONCLUSTERED</td>
<td class="center"></td>
<td class="center"></td>
<td>UserId</td>
</tr>
<tr>
<td>PK_UserRoles</td>
<td>CLUSTERED</td>
<td class="center">○</td>
<td class="center">○</td>
<td>UserId, RoleId</td>
</tr>
</tbody></table>
<div class="section-title">リレーション（FK）</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:32%;">FK名</th>
  <th class="th-green">From</th>
  <th class="th-green">To</th>
</tr></thead>
<tbody>
<tr>
<td>FK_UserRoles_Roles_RoleId</td>
<td>dbo.UserRoles.RoleId</td>
<td>dbo.Roles.Id</td>
</tr>
<tr>
<td>FK_UserRoles_Users_UserId</td>
<td>dbo.UserRoles.UserId</td>
<td>dbo.Users.Id</td>
</tr>
</tbody></table>
  <div class="footer">
    <div>NK Admin DB 定義書</div>
    <div>Generated: 2026/01/04 20:21</div>
  </div>
</div>

<div class="page-break"></div>
<div class="page">
<h1 class="title">テーブル定義 Users</h1>
<div class="section-title">テーブル情報</div>
<table class="table meta">
<tr>
<th class="th-green">システム名</th><td>NK Admin</td>
<th class="th-green">作成者</th><td>au248</td>
</tr>
<tr>
<th class="th-green">RDBMS</th><td>SQL Server</td>
<th class="th-green">作成日</th><td>2026/01/04</td>
</tr>
<tr>
<th class="th-green">スキーマ名</th><td>dbo</td>
<th class="th-green">テーブル名</th><td>Users</td>
</tr>
</table>
<div class="section-title">備考</div>
<div class="remarks-box">アプリケーション利用者（基本情報・認証情報・監査情報を含む）</div>
<div class="section-title">カラム情報</div>
<table class="table">
<thead><tr>
  <th class="th-green" style="width:6%;">No.</th>
  <th class="th-green" style="width:20%;">カラム名</th>
  <th class="th-green" style="width:18%;">データ型</th>
  <th class="th-green" style="width:12%;">Not Null</th>
  <th class="th-green" style="width:18%;">デフォルト</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">備考</th>
</tr></thead>
<tbody>
<tr>
<td class="center">1</td>
<td>Id</td>
<td>int</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center">○</td>
<td>主キー（内部採番）</td>
</tr>
<tr>
<td class="center">2</td>
<td>ExternalId</td>
<td>nvarchar(64)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>外部システム等と連携する際の永続的ID</td>
</tr>
<tr>
<td class="center">3</td>
<td>FullName</td>
<td>nvarchar(100)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>利用者名（氏名）</td>
</tr>
<tr>
<td class="center">4</td>
<td>Email</td>
<td>nvarchar(255)</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>メールアドレス（ログインIDなど）</td>
</tr>
<tr>
<td class="center">5</td>
<td>PhoneNumber</td>
<td>nvarchar(20)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>電話番号</td>
</tr>
<tr>
<td class="center">6</td>
<td>PasswordHash</td>
<td>nvarchar(256)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>パスワードハッシュ（暗号化またはハッシュ前提）</td>
</tr>
<tr>
<td class="center">7</td>
<td>BirthDate</td>
<td>date</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>生年月日（Always Encrypted候補）</td>
</tr>
<tr>
<td class="center">8</td>
<td>Gender</td>
<td>nvarchar(1)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>性別コード（M/F/O）</td>
</tr>
<tr>
<td class="center">9</td>
<td>IsDeleted</td>
<td>bit</td>
<td class="center">NOT NULL</td>
<td></td>
<td class="center"></td>
<td>論理削除フラグ</td>
</tr>
<tr>
<td class="center">10</td>
<td>CreatedAt</td>
<td>datetime2(7)</td>
<td class="center">NOT NULL</td>
<td>getutcdate()</td>
<td class="center"></td>
<td>登録日時（UTC）</td>
</tr>
<tr>
<td class="center">11</td>
<td>UpdatedAt</td>
<td>datetime2(7)</td>
<td class="center">NOT NULL</td>
<td>getutcdate()</td>
<td class="center"></td>
<td>更新日時（UTC）</td>
</tr>
<tr>
<td class="center">12</td>
<td>CreatedBy</td>
<td>nvarchar(64)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>作成者（監査用）</td>
</tr>
<tr>
<td class="center">13</td>
<td>UpdatedBy</td>
<td>nvarchar(64)</td>
<td class="center"></td>
<td></td>
<td class="center"></td>
<td>更新者（監査用）</td>
</tr>
</tbody></table>
<div class="section-title">インデックス</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:30%;">名前</th>
  <th class="th-green" style="width:18%;">種別</th>
  <th class="th-green" style="width:10%;">Unique</th>
  <th class="th-green" style="width:8%;">PK</th>
  <th class="th-green">キー列</th>
</tr></thead>
<tbody>
<tr>
<td>IX_Users_Email</td>
<td>NONCLUSTERED</td>
<td class="center">○</td>
<td class="center"></td>
<td>Email</td>
</tr>
<tr>
<td>PK_Users</td>
<td>CLUSTERED</td>
<td class="center">○</td>
<td class="center">○</td>
<td>Id</td>
</tr>
</tbody></table>
<div class="section-title">リレーション（FK）</div>
<table class="table small">
<thead><tr>
  <th class="th-green" style="width:32%;">FK名</th>
  <th class="th-green">From</th>
  <th class="th-green">To</th>
</tr></thead>
<tbody>
<tr><td colspan="3" class="center">(none)</td></tr>
</tbody></table>
  <div class="footer">
    <div>NK Admin DB 定義書</div>
    <div>Generated: 2026/01/04 20:21</div>
  </div>
</div>


</body>
</html>